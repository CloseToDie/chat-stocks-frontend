<div class="container">
  <div class="card py-2 mt-5 rounded" *ngIf="nickname">
    <div class="card-body">

      <div class="row">
        <div class="col-lg-3">

          <div class="card" *ngIf="clients$ | async as clients">
            <div class="card-header">
              Online <span class="badge badge-success">{{ clients.length }}</span>
            </div>
            <div class="card-body">
              <div *ngFor="let client of clients">
                <div>
                  {{ client.nickname }}
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-9">
          <div class="card">
            <div class="card-body" #scrollMe style="height: 300px; overflow-y: auto;">
              <div class="mb-3" *ngFor="let message of messages">
                <h6 class="my-0">{{message.chatClient?.nickname}}: {{message.message}}</h6>
                <small class="my-0 font-weight-light">[{{ message.sentAt | date: 'shortTime' }}]</small>
              </div>
            </div>
          </div>

          <div style="height: 20px;">
            <small *ngIf="clientsTyping.length > 0" style="color: gray">
              <span *ngFor="let client of clientsTyping">{{ client.nickname }}, is typing</span>
            </small>
          </div>

          <div class="row mt-3">
            <div class="col-lg-10">
              <div class="form-group" (keyup.enter)="sendMessage()">
                <input id="messageFc" class="form-control" type="text" [formControl]="messageFc" placeholder="Whats on your heart?...">
              </div>
            </div>
            <div class="col-lg-2">
              <button class="btn btn-primary px-4 float-right" (click)="sendMessage()">Send</button>
            </div>
          </div>

        </div>
      </div>

    </div>
  </div>
</div>

<div class="container">
  <div class="card py-2 mt-5 rounded" *ngIf="!nickname">
    <div class="card-body">
      <div class="row">
        <div class="col-lg-3"></div>
        <div class="col-lg-6">
          <div class="form-group" (keyup.enter)="sendNickName()">
            <label for="nickNameFc">Enter Nickname</label>
            <input id="nickNameFc" class="form-control" type="text" [formControl]="nickNameFc">
          </div>
          <button class="btn btn-primary px-5" (click)="sendNickName()">Login</button>
        </div>
        <div class="col-lg-3"></div>
      </div>
    </div>
  </div>
</div>


